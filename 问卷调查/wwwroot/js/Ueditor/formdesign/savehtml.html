<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>保存表单</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" >
    <meta name="generator" content="www.leipi.org" />
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">	
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../dialogs/internal.js"></script>
</head>
<body>
    <div>
	<input type='text' placeholder='请输入表单名称' id='htmlinput_name'/>
	</div>
	
	<div id='div_html' style='display:none'>
	</div>
<script type="text/javascript">
dialog.onok = function (){
var name = $('#htmlinput_name').val();
var content = editor.getContent();
if(name==''){alert('请输入表单名称');return false;}

$('#div_html').html(content);
//CreateDomId();
content = $('#div_html').html();


$.ajax({
url : '/Settings/SaveHtml',
type : 'post',
async: false,//使用同步的方式,true为异步方式
data : {htmlstr:content,name:name},//这里使用json对象
success : function(data){
alert(data);
},
fail:function(){
//code here...
}
});

}

function CreateDomId(html){
$.each($('#div_html input[name="leipiNewField"][type=checkbox]'),
                function (i, e) {
                    $(this).attr('id', 'checkbox_' + (i+1));
                });
}
</script>
</body>
</html>